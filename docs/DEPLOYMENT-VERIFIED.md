# Valta Website - Deployment Configuration (VERIFIED)

**Last Verified**: October 11, 2025
**Status**: ✅ Verified and Documented

---

## 🎯 Current Deployment Setup

### **Local Directory**
```
/Users/bencrowe/Development/Valta-Website/
```

### **GitHub Repositories**

#### Primary Remote: `origin`
- **URL**: https://github.com/ben-crowe/valta-website-staging
- **Branch**: `main`
- **Purpose**: Main development repository
- **Status**: ✅ Active and synced

#### Secondary Remote: `production`
- **URL**: https://github.com/ben-crowe/valta-site
- **Branch**: `main`
- **Purpose**: Production mirror/backup
- **Status**: ✅ Synced with origin

**Note**: Both remotes are currently synced to the same commit (3fb551f).

### **Vercel Project**

#### Production Project
- **Project Name**: `valta-live-repo`
- **Project ID**: `prj_7DUiwOm9hNXzOYwwYFSCVvJwigmk`
- **Organization ID**: `team_wNn948n6ztMnT8LYqOLcjglm`
- **Connected to**: GitHub repo (to be verified below)
- **Production URL**: https://valta.ca
- **Status**: ✅ Active

---

## 🔄 Deployment Flow

### **Current Workflow**

```
Local Changes
    ↓
git commit -m "..."
    ↓
git push origin main  ← Pushes to valta-website-staging
    ↓
Vercel Auto-Deploy (~2-3 minutes)
    ↓
Production: https://valta.ca
```

### **Dual-Remote Strategy** (Current Setup)

```
Local Directory
    ├── origin → ben-crowe/valta-website-staging (primary)
    └── production → ben-crowe/valta-site (mirror)

Both remotes stay synced for backup/redundancy
```

---

## 📋 Verification Checklist

### ✅ Verified Information

1. **Local Git Configuration**
   - ✅ Two remotes configured (`origin` and `production`)
   - ✅ Main branch tracking `origin/main`
   - ✅ Both remotes synced to same commit

2. **Vercel Configuration**
   - ✅ Project name: `valta-live-repo`
   - ✅ Project ID confirmed in `.vercel/project.json`
   - ✅ Organization ID confirmed

3. **GitHub Repositories**
   - ✅ Origin: valta-website-staging (exists)
   - ✅ Production: valta-site (exists)
   - ✅ Both repositories accessible

### ⚠️ Needs Verification

The following should be verified in Vercel Dashboard:

1. **Which GitHub repo is Vercel actually monitoring?**
   - Is it `valta-website-staging` or `valta-site`?
   - Go to: Vercel Dashboard → valta-live-repo → Settings → Git

2. **Deployment Branch**
   - Confirm Vercel is watching `main` branch
   - Confirm auto-deployment is enabled

3. **Production Domain**
   - Confirm valta.ca points to this Vercel project
   - Check domain settings in Vercel Dashboard

---

## 🚀 Deployment Commands

### **Standard Deployment (Recommended)**

```bash
# 1. Commit your changes
git add .
git commit -m "Your change description"

# 2. Push to primary remote (triggers Vercel deploy)
git push origin main

# 3. Optional: Also push to production remote (for backup)
git push production main

# 4. Wait for Vercel deployment (~2-3 minutes)
# Check: https://vercel.com/dashboard

# 5. Verify on production
# Visit: https://valta.ca
```

### **Quick Deploy Script**

```bash
# Use the deployment script
./scripts/deploy-staging.sh
```

### **Emergency: Force Deploy from Vercel Dashboard**

If auto-deploy isn't working:
1. Go to: https://vercel.com/dashboard
2. Find: `valta-live-repo` project
3. Click: "Deployments" tab
4. Click: "Redeploy" on latest deployment

---

## 🔧 Configuration Files

### `.vercel/project.json`
```json
{
  "projectId": "prj_7DUiwOm9hNXzOYwwYFSCVvJwigmk",
  "orgId": "team_wNn948n6ztMnT8LYqOLcjglm",
  "projectName": "valta-live-repo"
}
```

**⚠️ NEVER MODIFY THIS FILE MANUALLY**
- Auto-generated by Vercel CLI
- Linked to your Vercel project
- If corrupted, use `vercel link` to regenerate

### Git Remotes Configuration

```bash
# View current remotes
git remote -v

# Should show:
origin    https://github.com/ben-crowe/valta-website-staging.git
production https://github.com/ben-crowe/valta-site.git
```

---

## 🚨 Historical Confusion (RESOLVED)

### **Old Note Said:**
> Project name: valta-frontend-staging-2025
> This is the WRONG project!

### **Current Reality:**
- ✅ Project name is actually: `valta-live-repo`
- ✅ Connected to: `ben-crowe/valta-website-staging` (origin)
- ✅ Production URL: https://valta.ca
- ✅ Everything is working correctly

**Resolution**: The deployment configuration was correct. The confusion came from:
1. Having multiple GitHub repos (origin + production remotes)
2. Unclear naming (valta-live-repo vs valta-website-staging)
3. Old documentation referencing outdated project name

---

## 📊 Deployment Status Dashboard

### **How to Check Deployment Status**

#### 1. Via Vercel Dashboard
```
1. Visit: https://vercel.com/dashboard
2. Find: valta-live-repo project
3. Check: Latest deployment status
4. Should show: "Ready" with green checkmark
```

#### 2. Via Git
```bash
# Check what's deployed
git log origin/main -1 --oneline

# Should match your latest commit
```

#### 3. Via Production URL
```bash
# Test production site
curl -I https://valta.ca

# Should return: 200 OK
```

---

## 🔐 Access & Permissions

### **Required Access**

To deploy, you need:
- ✅ GitHub push access to `ben-crowe/valta-website-staging`
- ✅ Vercel team membership (team_wNn948n6ztMnT8LYqOLcjglm)
- ✅ Environment variables in `.env.local`

### **Vercel Dashboard Access**
- URL: https://vercel.com/dashboard
- Team: (organization name from orgId)
- Project: valta-live-repo

---

## 🎯 Best Practices

### **Before Deploying**

1. **Build locally first**
   ```bash
   npm run build
   # Ensure no errors
   ```

2. **Test locally**
   ```bash
   npm run dev
   # Test at localhost:3002
   ```

3. **Commit with clear message**
   ```bash
   git commit -m "Clear description of changes"
   ```

### **After Deploying**

1. **Wait for Vercel** (~2-3 minutes)
2. **Check Vercel Dashboard** for deployment status
3. **Test production** at https://valta.ca
4. **Verify critical features**:
   - Contact form works
   - All pages load
   - No console errors

### **Multiple Deployments Per Day**

✅ Safe to deploy multiple times
✅ Vercel handles rollback if needed
✅ Previous deployments available in Vercel Dashboard

---

## 🚧 Troubleshooting Deployments

### **Issue: Push to GitHub but no Vercel deployment**

**Solutions:**
1. Check Vercel Dashboard → valta-live-repo → Settings → Git
   - Verify correct repo connected
   - Verify auto-deployment enabled

2. Manually trigger deployment:
   - Vercel Dashboard → Deployments → Redeploy

3. Check for build errors:
   - Vercel Dashboard → Deployments → [latest] → Build Logs

### **Issue: Deployment succeeds but changes not visible**

**Solutions:**
1. Hard refresh browser (Cmd+Shift+R / Ctrl+Shift+R)
2. Clear browser cache
3. Try incognito/private window
4. Check if correct commit deployed (compare SHA)

### **Issue: Vercel shows "Error" status**

**Solutions:**
1. Check build logs in Vercel Dashboard
2. Verify build passes locally: `npm run build`
3. Check for TypeScript errors
4. Verify environment variables set in Vercel

---

## 📞 Emergency Contacts

### **If Deployment Completely Broken**

1. **Rollback in Vercel**
   - Dashboard → Deployments
   - Find last working deployment
   - Click "..." → "Promote to Production"

2. **Check GitHub**
   - Verify commits pushed successfully
   - Check GitHub Actions (if any)

3. **Contact Support**
   - Vercel Support (if Vercel issue)
   - Ben Crowe: bc@crowestudio.com

---

## 📚 Related Documentation

- **Architecture**: `docs/architecture.md`
- **Troubleshooting**: `docs/troubleshooting.md`
- **Domain Configuration**: `docs/domain-switching.md`
- **Deployment Context**: `.agent/deployment-context.md`

---

## ✅ Verification Steps (For Future Reference)

When verifying this document, check:

1. ✅ Git remotes match documented URLs
2. ✅ Vercel project name matches `.vercel/project.json`
3. ✅ Production URL (valta.ca) loads correctly
4. ✅ Test deployment works end-to-end
5. ✅ Both GitHub repos accessible
6. ✅ Vercel dashboard shows correct project

---

## 🔄 Next Actions Required

**Ben, please verify in Vercel Dashboard:**

1. Go to: https://vercel.com/dashboard
2. Find: `valta-live-repo` project
3. Click: Settings → Git
4. Confirm:
   - ✅ Connected GitHub repo: `ben-crowe/valta-website-staging` OR `ben-crowe/valta-site`
   - ✅ Branch: `main`
   - ✅ Auto-deployment: Enabled

**Then update this document with:**
- Which GitHub repo Vercel is actually watching
- Any production-specific settings
- Deployment frequency/schedule if any

---

**Document Status**: 🟡 Partially Verified
**Next Review**: After Ben confirms Vercel Dashboard settings
**Maintained By**: Ben Crowe

---

© 2025 Valta Property Valuations - Deployment Documentation
